#pragma checksum "D:\eSya Project\Solution\eSyaEnterprise_UI\trunk\eSyaEnterprise_UI\Areas\eSyaNatureCure\Views\FirstConsultation\_Activities.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "45b230fa0ac700d8c135dae48e45f2fd1047f9b4"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Areas_eSyaNatureCure_Views_FirstConsultation__Activities), @"mvc.1.0.view", @"/Areas/eSyaNatureCure/Views/FirstConsultation/_Activities.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Areas/eSyaNatureCure/Views/FirstConsultation/_Activities.cshtml", typeof(AspNetCore.Areas_eSyaNatureCure_Views_FirstConsultation__Activities))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "D:\eSya Project\Solution\eSyaEnterprise_UI\trunk\eSyaEnterprise_UI\Areas\eSyaNatureCure\Views\FirstConsultation\_Activities.cshtml"
using Microsoft.AspNetCore.Mvc.Localization;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"45b230fa0ac700d8c135dae48e45f2fd1047f9b4", @"/Areas/eSyaNatureCure/Views/FirstConsultation/_Activities.cshtml")]
    public class Areas_eSyaNatureCure_Views_FirstConsultation__Activities : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(200, 985, true);
            WriteLiteral(@"

<section>
    <div class=""row m-0"">
        <div class=""col-lg-10"">
            <h1 class=""ga-heading"">My Activities</h1>
        </div>
        <div class=""col-lg-2"">
            <div class=""row mr-0"">
                <div id=""floatButtons"" class=""col-xl-2 col-lg-12 text-right p-0"">

                    <button class=""mdl-button"" id=""btnSaveForm"" onclick=""fnAddActivity()""> <span class=""btntext"">Add Activity</span></button>
                </div>
            </div>
        </div>
    </div>
</section>
<div id=""devActivities"">

</div>


<div class=""modal fade in"" id=""PopupAddActivity"" data-keyboard=""false"" data-backdrop=""static"">
    <div class=""modal-dialog modal-lg"" role=""document"" style=""box-shadow:none;"">
        <div class=""modal-content"">
            <div class=""modal-header popupHeader"">
                <button type=""button"" class=""close"" data-dismiss=""modal""> <i class=""fa fa-times""></i></button>
                <h4 class=""modal-title"">");
            EndContext();
            BeginContext(1186, 24, false);
#line 32 "D:\eSya Project\Solution\eSyaEnterprise_UI\trunk\eSyaEnterprise_UI\Areas\eSyaNatureCure\Views\FirstConsultation\_Activities.cshtml"
                                   Write(Localizer["AddActivity"]);

#line default
#line hidden
            EndContext();
            BeginContext(1210, 326, true);
            WriteLiteral(@" </h4>
            </div>
            <div class=""modal-body"">
                <div class=""row padbot4"">
                    <div class=""col-lg-6 col-md-6 col-sm-12 col-xs-12"">
                        <div class=""form-group"">
                            <div>
                                <label class=""lable-color"">");
            EndContext();
            BeginContext(1537, 21, false);
#line 39 "D:\eSya Project\Solution\eSyaEnterprise_UI\trunk\eSyaEnterprise_UI\Areas\eSyaNatureCure\Views\FirstConsultation\_Activities.cshtml"
                                                      Write(Localizer["Activity"]);

#line default
#line hidden
            EndContext();
            BeginContext(1558, 501, true);
            WriteLiteral(@" </label>
                                <select class=""selectpicker"" data-live-search=""false"" id=""cboActivities"" title="""" data-container=""body""></select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class=""row padbot4"">
                    <div class=""col-lg-6 col-md-6 col-sm-12 col-xs-12"">
                        <div class=""form-group"">
                            <label for=""txtActivityDate"">");
            EndContext();
            BeginContext(2060, 25, false);
#line 48 "D:\eSya Project\Solution\eSyaEnterprise_UI\trunk\eSyaEnterprise_UI\Areas\eSyaNatureCure\Views\FirstConsultation\_Activities.cshtml"
                                                    Write(Localizer["ActivityDate"]);

#line default
#line hidden
            EndContext();
            BeginContext(2085, 373, true);
            WriteLiteral(@"<span class=""lblInfo"">DD/MM/YYYY</span></label>
                            <input id=""txtActivityDate"" type=""text"" class=""form-control datepicker"" />
                        </div>
                    </div>
                    <div class=""col-lg-3 col-md-3 col-sm-12 col-xs-12"">
                        <div class=""form-group"">
                            <label>  ");
            EndContext();
            BeginContext(2459, 21, false);
#line 54 "D:\eSya Project\Solution\eSyaEnterprise_UI\trunk\eSyaEnterprise_UI\Areas\eSyaNatureCure\Views\FirstConsultation\_Activities.cshtml"
                                Write(Localizer["FromTime"]);

#line default
#line hidden
            EndContext();
            BeginContext(2480, 340, true);
            WriteLiteral(@"</label>
                            <input id=""txtFromTime"" class=""form-control"" type=""time"" autocomplete=""off"" />

                        </div>
                    </div>
                    <div class=""col-lg-3 col-md-3 col-sm-12 col-xs-12"">
                        <div class=""form-group"">
                            <label>  ");
            EndContext();
            BeginContext(2821, 19, false);
#line 61 "D:\eSya Project\Solution\eSyaEnterprise_UI\trunk\eSyaEnterprise_UI\Areas\eSyaNatureCure\Views\FirstConsultation\_Activities.cshtml"
                                Write(Localizer["ToTime"]);

#line default
#line hidden
            EndContext();
            BeginContext(2840, 595, true);
            WriteLiteral(@"</label>
                            <input id=""txtToTime"" class=""form-control"" type=""time"" autocomplete=""off"" />

                        </div>
                    </div>


                </div>


            </div>
            <div class=""modal-footer"">
                <div class=""row"">
                    <div class=""col-lg-12"">
                        <button class=""mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent primary-button"" id=""btnSaveActivity"" onclick=""fnSaveActivity();"">
                            <i class=""fa fa-save""></i> ");
            EndContext();
            BeginContext(3436, 17, false);
#line 76 "D:\eSya Project\Solution\eSyaEnterprise_UI\trunk\eSyaEnterprise_UI\Areas\eSyaNatureCure\Views\FirstConsultation\_Activities.cshtml"
                                                  Write(Localizer["Save"]);

#line default
#line hidden
            EndContext();
            BeginContext(3453, 7603, true);
            WriteLiteral(@"
                        </button>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<script>
    $(document).ready(function () {
        fnGetGuestActivities();
        fnGetActivities();
    });
    function fnGetGuestActivities() {
        var l_activities = [];
        var _content = """";
        $.ajax({
            url: getBaseURL() + '/FirstConsultation/GetGuestActivities?ipNumber=' + $(""#hdbookingKey"").val() + $(""#hdguestId"").val(),
            type: 'GET',
            datatype: 'json',
            async: false,
            success: function (response) {
                activities = response;
            },
            error: function (error) {
                toastr.error(error.statusText);
            }
        });
        var l_head = activities.l_activityheader;

        $.each(l_head, function (ky, h) {
            
            _content += ""<section class='mt-4'><div class='row border-");
            WriteLiteral(@"bottom'><div class='col-lg-12 col-md-12 col-12 border-bottom pl-0'>"";
            _content += ""<a class='bold m-0' href='#head_"" + h.ActivityDayId + ""' data-toggle='collapse' role='button' aria-expanded='false'>"";
            _content += ""<i class='fa fa-chevron-circle-right'></i> "" + h.ActivityDate + ""<span class='timeline-duration'>"";
            _content += ""<i class='fa fa-circle f-11'></i> Tracked "" + h.ActivityDurationHH + "" hrs</span>"";
            _content += ""</a></div></div>"";
            _content += ""<div id='head_"" + h.ActivityDayId + ""' class='collapse'>"";
            var l_act = activities.l_activitydetails.filter(element => element.ActivityDayId === h.ActivityDayId);
            $.each(l_act, function (ky, a) {
                var _color = """";
                if (!a.ActiveStatus) {
                    _color = ""style = 'background-color:#F75D59;'"";
                }

                _content += ""<div class='row border-bottom' "" + _color + ""><div class='col-lg-2 col-md-2 my-4'>"";
 ");
            WriteLiteral(@"               _content += ""<p class='m-0'>"" + a.ActivityFromTime + "" - "" + a.ActivityToTime + ""</p>"";
                _content += ""<span class='text-black-50 f-11'>"" + a.ActivityDurationHH + "" hrs</span>"";
                _content += ""</div><div class='col-lg-2 col-md-2 pl-0 my-4'>"";
                _content += ""<p class='m-0'>"" + a.ActivityDesc + ""</p>"";
                _content += ""<span class='text-black-50 f-11'>"" + a.DepartmentDesc + ""</span></div><div class='col-lg-2 col-md-2 p-0 my-3 offset-lg-2 offset-md-2 border-left border-right text-center'>"";
                _content += ""<p class='text-black-50 m-0 f-11'>"" + a.ModifiedUser + ""</p>"";
                _content += ""<p class='text-black-50 m-0 f-11'>"" + a.ModifiedOn + ""</p>"";
                var _st = 'Activate';
                if (a.ActiveStatus) {
                    _st = 'Deactivate';
                }
                _content += ""<p id='s_"" + a.SerialNumber + ""'class='text-black-50 m-0 f-11'><a href='#' onclick='fnUpdateActivity("" + a");
            WriteLiteral(@".SerialNumber + "","" + !a.ActiveStatus + "")' > "" + _st + "" </a></p></div></div>"";


            });
            _content += "" </div></section>"";


        });

        $(""#devActivities"").html(_content);


    }
    function fnGetActivities() {
        $.ajax({
            url: getBaseURL() + '/FirstConsultation/GetActivities',
            type: 'GET',
            datatype: 'json',
            async: false,
            success: function (response) {
                $(""#cboActivities"").append('<option value=""0"">Select Activity</option>');
                $('#cboActivities').selectpicker('refresh');
                for (var i = 0; i < response.length; i++) {
                    $(""#cboActivities"").append('<option value=""' + response[i].ActivityId + '""> ' + response[i].ActivityDesc + ' </option>');
                    $('#cboActivities').selectpicker('refresh');
                }
            },
            error: function (error) {
                toastr.error(error.statusText);
     ");
            WriteLiteral(@"       }
        });
    }
    function fnUpdateActivity(_serial, _status) {

        var obj = {
            Ipnumber: $(""#hdbookingKey"").val() + $(""#hdguestId"").val(),
            SerialNumber: _serial,
            ActiveStatus: _status
        };

        $.ajax({
            url: getBaseURL() + '/FirstConsultation/AddOrUpdateGuestActivity',
            type: 'POST',
            datatype: 'json',
            data: { obj: obj },
            success: function (response) {
                if (response.Status) {

                    $(""#devActivities"").html('');
                    fnGetGuestActivities();
                    toastr.success(response.Message);
                }
                else {
                    toastr.error(response.Message);
                }

            },
            error: function (error) {
                toastr.error(error.statusText);
            }
        });


    }
    function fnAddActivity() {
        fnClearFields();
        $(""#PopupA");
            WriteLiteral(@"ddActivity"").modal('show');

    }
    function fnSaveActivity() {
        if (IsStringNullorEmpty($(""#cboActivities"").val()) || $(""#cboActivities"").val() == ""0"") {
            toastr.warning(""Please select Activity"");
            return;
        }
        if (IsStringNullorEmpty($(""#txtActivityDate"").val())) {
            toastr.warning(""Please Enter Activity Date"");
            return;
        }
        if (IsStringNullorEmpty($(""#txtFromTime"").val())) {
            toastr.warning(""Please Enter From Time"");
            return;
        }
        if (IsStringNullorEmpty($(""#txtToTime"").val())) {
            toastr.warning(""Please Enter To Time"");
            return;
        }
        var startTime = $('#txtFromTime').val();
        var endTime = $('#txtToTime').val();

        var startDate = new Date(""1/1/1900 "" + startTime);
        var endDate = new Date(""1/1/1900 "" + endTime);

        if (startDate >= endDate) {
            toastr.warning(""From Time can't be more than or equal ");
            WriteLiteral(@"to To Time."");
            $('#txtToTime').focus();
            return;
        }

        var obj = {
            Ipnumber: $(""#hdbookingKey"").val() + $(""#hdguestId"").val(),
            SerialNumber: '0',
            HospitalNumber: $(""#hdUHID"").val(),
            ActivityId: $(""#cboActivities"").val(),
            ActivityDate: $(""#txtActivityDate"").val(),
            ActivityFromTime: $(""#txtFromTime"").val(),
            ActivityToTime: $(""#txtToTime"").val(),
        };

        $.ajax({
            url: getBaseURL() + '/FirstConsultation/AddOrUpdateGuestActivity',
            type: 'POST',
            datatype: 'json',
            data: { obj: obj },
            success: function (response) {
                if (response.Status) {

                    $(""#devActivities"").html('');
                    fnGetGuestActivities();
                    $(""#PopupAddActivity"").modal('hide');
                    toastr.success(response.Message);
                }
                else {
   ");
            WriteLiteral(@"                 toastr.error(response.Message);
                }

            },
            error: function (error) {
                toastr.error(error.statusText);
            }
        });
    }
    function fnClearFields() {
        $('#cboActivities').val(""0"").selectpicker('refresh');
        $(""#txtActivityDate"").val('');
        $(""#txtFromTime"").val('');
        $('#txtToTime').val('');
    }

</script>
");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public IViewLocalizer Localizer { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
